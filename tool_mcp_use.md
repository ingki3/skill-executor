# MCP 및 외부 검색 도구 사용 및 확장 가이드 (tool_mcp_use.md)

이 문서는 Skill Executor Agent에서 **MCP(Model Context Protocol)**나 **외부 검색(Search)** 기능이 필요할 때의 현재 동작 방식과 이를 확장하는 아키텍처를 설명합니다.

## 1. 현재 구현 상태 (As-Is)

현재 시스템은 **HITL(Human-In-The-Loop)** 기반의 대화형 스킬 실행에 최적화되어 있으며, 외부 도구(External Tools) 연동은 제한적입니다.

*   **가용 도구**: 현재 `RequestInputTool` 하나만 존재합니다. (사용자에게 추가 정보를 질문하는 용도)
*   **동작 방식**: 에이전트는 오직 `RequestInputTool`을 사용하여 사용자에게 정보를 묻거나, 자신이 학습한 내장 지식만 사용하여 답변합니다.

## 2. 동적 도구 로딩 아키텍처 (확장 계획)

에이전트가 사용할 수 있는 도구를 코드에 하드코딩하지 않고, 설정 파일(`tools.json`, `mcp.json`)을 통해 동적으로 로드하도록 설계합니다.

### 2.1 설정 파일 구조

#### **tools.json**
에이전트가 로컬에서 즉시 사용할 수 있는 도구들을 정의합니다.
- `name`: 도구 이름
- `description`: 에이전트가 언제 이 도구를 써야 하는지 판단하는 기준
- `function`: 실행할 함수 이름
- `inputs/outputs`: JSON Schema 형식의 입력 및 출력 정의

#### **mcp.json**
외부 MCP 서버 정보를 관리합니다.
- `mcp_servers`: 외부 MCP 서버 URL 및 연결 정보 목록

### 2.2 도구 구현 방식
- **위치**: `backend/src/tools/` 폴더 내에 `{도구이름}.py` 형식으로 저장합니다.
- **예시**: `code_execution.py`, `web_search.py` 등

### 2.3 에이전트 참조 프로세스
1. 에이전트 시작 시 `backend/src/tools/tools.json`과 `mcp.json`을 읽어 가용 도구 목록을 구성합니다.
2. 에이전트는 해당 파일에 정의된 `description`을 참고하여 어떤 도구를 호출할지 결정합니다.
3. 결정된 도구 이름에 해당하는 `.py` 파일을 동적으로 import하여 실행합니다.

## 3. 기본 제공 도구 (기본 구현 대상)

| 도구 이름 | 파일명 | 설명 |
| :--- | :--- | :--- |
| **코드 실행** | `code_execution.py` | 스킬에 첨부된 Python 코드 또는 쉘 스크립트를 실행합니다. |
| **웹 검색** | `web_search.py` | 실시간 정보가 필요할 때 외부 검색 API를 호출합니다. |
| **사용자 입력 요청** | `request_human_input.py` | 사용자에게 추가 정보를 질문합니다. |

## 4. 확장 로드맵 요약
*   **설정 기반**: 도구를 추가할 때 코드를 수정하는 대신 `json` 파일에 정의를 추가합니다.
*   **유연성**: 외부 MCP 서버를 추가하기만 하면 에이전트가 즉시 새로운 리소스에 접근할 수 있습니다.
*   **표준화**: JSON Schema를 사용하여 입력과 출력의 형식을 엄격하게 관리합니다.
